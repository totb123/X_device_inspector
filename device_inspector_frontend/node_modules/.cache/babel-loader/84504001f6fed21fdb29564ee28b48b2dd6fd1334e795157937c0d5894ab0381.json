{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery } from 'react-query';\nimport { getLastImage } from '../services/getLastImage';\nimport { useEffect, useState } from 'react';\nimport { useDebounce } from '../../../hooks/useDebounce';\nexport const useLastImageGet = (initialSectorId, refetchDelay) => {\n  _s();\n  const debounce = useDebounce();\n  const [sectorId, setSectorId] = useState(initialSectorId);\n  const updateSectorId = sectorId => {\n    setSectorId(sectorId);\n  };\n  const {\n    data,\n    status,\n    refetch,\n    dataUpdatedAt\n  } = useQuery({\n    queryFn: () => getLastImage(sectorId)\n  });\n  useEffect(() => {\n    refetch();\n  }, [sectorId, refetch]);\n  useEffect(() => {\n    if (status === 'success') debounce(() => {\n      refetch();\n    }, refetchDelay);\n  }, [status, refetch]);\n  return {\n    lastImageString: data,\n    lastImageStatus: status,\n    lastImageUpdatedAt: dataUpdatedAt,\n    updateSectorId: updateSectorId\n  };\n};\n_s(useLastImageGet, \"t/SvusM84Pwh5Nomzi3IdE2vsh0=\", false, function () {\n  return [useDebounce, useQuery];\n});","map":{"version":3,"names":["useQuery","getLastImage","useEffect","useState","useDebounce","useLastImageGet","initialSectorId","refetchDelay","_s","debounce","sectorId","setSectorId","updateSectorId","data","status","refetch","dataUpdatedAt","queryFn","lastImageString","lastImageStatus","lastImageUpdatedAt"],"sources":["/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/src/features/latestInspectionImage/hooks/useLastImageGet.ts"],"sourcesContent":["import { useQuery } from 'react-query'\nimport { getLastImage } from '../services/getLastImage'\nimport { useEffect, useState } from 'react'\nimport { useDebounce } from '../../../hooks/useDebounce'\n\nexport const useLastImageGet = (\n  initialSectorId: number, refetchDelay: number\n) => {\n  const debounce = useDebounce()\n\n  const [sectorId, setSectorId] = useState(initialSectorId)\n\n  const updateSectorId = (sectorId: number) => {\n    setSectorId(sectorId)\n  }\n\n  const {data, status, refetch, dataUpdatedAt} = useQuery<string, string>(\n    {queryFn: () => getLastImage(sectorId)}\n  )\n  \n  useEffect(() => {\n    refetch()\n  }, [sectorId, refetch])\n\n  useEffect(() => {\n    if (status === 'success')\n      debounce(() => {refetch()}, refetchDelay)\n  }, [status, refetch])\n  \n  return {\n    lastImageString: data, \n    lastImageStatus: status, \n    lastImageUpdatedAt: dataUpdatedAt,\n    updateSectorId: updateSectorId\n  }\n}"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,aAAa;AACtC,SAASC,YAAY,QAAQ,0BAA0B;AACvD,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,4BAA4B;AAExD,OAAO,MAAMC,eAAe,GAAGA,CAC7BC,eAAuB,EAAEC,YAAoB,KAC1C;EAAAC,EAAA;EACH,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACM,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAACG,eAAe,CAAC;EAEzD,MAAMM,cAAc,GAAIF,QAAgB,IAAK;IAC3CC,WAAW,CAACD,QAAQ,CAAC;EACvB,CAAC;EAED,MAAM;IAACG,IAAI;IAAEC,MAAM;IAAEC,OAAO;IAAEC;EAAa,CAAC,GAAGhB,QAAQ,CACrD;IAACiB,OAAO,EAAEA,CAAA,KAAMhB,YAAY,CAACS,QAAQ;EAAC,CACxC,CAAC;EAEDR,SAAS,CAAC,MAAM;IACda,OAAO,CAAC,CAAC;EACX,CAAC,EAAE,CAACL,QAAQ,EAAEK,OAAO,CAAC,CAAC;EAEvBb,SAAS,CAAC,MAAM;IACd,IAAIY,MAAM,KAAK,SAAS,EACtBL,QAAQ,CAAC,MAAM;MAACM,OAAO,CAAC,CAAC;IAAA,CAAC,EAAER,YAAY,CAAC;EAC7C,CAAC,EAAE,CAACO,MAAM,EAAEC,OAAO,CAAC,CAAC;EAErB,OAAO;IACLG,eAAe,EAAEL,IAAI;IACrBM,eAAe,EAAEL,MAAM;IACvBM,kBAAkB,EAAEJ,aAAa;IACjCJ,cAAc,EAAEA;EAClB,CAAC;AACH,CAAC;AAAAJ,EAAA,CA9BYH,eAAe;EAAA,QAGTD,WAAW,EAQmBJ,QAAQ;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}