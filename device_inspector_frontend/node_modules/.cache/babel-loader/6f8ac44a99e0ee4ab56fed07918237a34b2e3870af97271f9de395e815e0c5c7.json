{"ast":null,"code":"var _jsxFileName = \"/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/device_inspector_frontend/src/components/commentsDisplayedForm.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { Button, Card, Form, Input, List, Spin } from 'antd';\nimport React, { useEffect, useState } from 'react';\n// eslint-disable-next-line @stylistic/max-len\nimport useCommentsHandler from '../features/inspectionsHistory/hooks/useCommentsHandler';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CommentsDisplayedForm = ({\n  inspectionId\n}) => {\n  _s();\n  const {\n    comments,\n    commentsStatus,\n    addComment,\n    commentsRefetch\n  } = useCommentsHandler(inspectionId);\n  useEffect(() => {\n    commentsRefetch();\n    return () => {};\n  }, [commentsStatus, commentsRefetch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CommentDisplay, {\n      status: commentsStatus,\n      comments: comments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(InspectionCommentForm, {\n      handlePost: addComment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n_s(CommentsDisplayedForm, \"EiKahnB9GshbmpD7kJrhdrvO4Ps=\", false, function () {\n  return [useCommentsHandler];\n});\n_c = CommentsDisplayedForm;\nconst CommentDisplay = ({\n  comments,\n  status\n}) => {\n  if (status === 'loading' || comments === undefined) return /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 62\n  }, this);\n  if (comments.length === 0) return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      title: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxHeight: '250px',\n          overflow: 'scroll'\n        },\n        children: /*#__PURE__*/_jsxDEV(List, {\n          dataSource: comments.reverse(),\n          renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                width: '100%'\n              },\n              children: item.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n_c2 = CommentDisplay;\nconst InspectionCommentForm = ({\n  handlePost\n}) => {\n  _s2();\n  const [message, setMessage] = useState('');\n  const [isDisabled, setIsDisabled] = useState(true);\n  const handleSubmit = () => {\n    handlePost({\n      text: message\n    });\n    setMessage('');\n  };\n  useEffect(() => {\n    if (message === '') setIsDisabled(true);\n    if (message !== '') setIsDisabled(false);\n    return () => {};\n  }, [message]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    style: {\n      margin: '16px'\n    },\n    size: \"small\",\n    title: \"\\u041A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      labelAlign: 'left',\n      layout: \"vertical\",\n      children: [/*#__PURE__*/_jsxDEV(Input.TextArea, {\n        allowClear: true,\n        showCount: true,\n        value: message,\n        onChange: val => setMessage(val.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        disabled: isDisabled,\n        onClick: handleSubmit,\n        children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 10\n  }, this);\n};\n_s2(InspectionCommentForm, \"VwfVL4zG9E1ELJneoXiNoT8T//M=\");\n_c3 = InspectionCommentForm;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"CommentsDisplayedForm\");\n$RefreshReg$(_c2, \"CommentDisplay\");\n$RefreshReg$(_c3, \"InspectionCommentForm\");","map":{"version":3,"names":["Button","Card","Form","Input","List","Spin","React","useEffect","useState","useCommentsHandler","jsxDEV","_jsxDEV","Fragment","_Fragment","CommentsDisplayedForm","inspectionId","_s","comments","commentsStatus","addComment","commentsRefetch","children","CommentDisplay","status","fileName","_jsxFileName","lineNumber","columnNumber","InspectionCommentForm","handlePost","_c","undefined","length","title","style","maxHeight","overflow","dataSource","reverse","renderItem","item","Item","width","text","_c2","_s2","message","setMessage","isDisabled","setIsDisabled","handleSubmit","margin","size","labelAlign","layout","TextArea","allowClear","showCount","value","onChange","val","target","type","disabled","onClick","_c3","$RefreshReg$"],"sources":["/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/device_inspector_frontend/src/components/commentsDisplayedForm.tsx"],"sourcesContent":["import { Button, Card, Empty, Form, Input, List, Spin } from 'antd'\nimport React, { useEffect, useState } from 'react'\nimport { TComment } from '../types/commentType'\n// eslint-disable-next-line @stylistic/max-len\nimport useCommentsHandler from '../features/inspectionsHistory/hooks/useCommentsHandler'\n\ntype CommentDisplayedFormProps = {\n  inspectionId: number\n}\n\nexport const CommentsDisplayedForm: React.FC<CommentDisplayedFormProps> = (\n  {inspectionId}\n) => {\n  const {\n    comments,\n    commentsStatus,\n    addComment,\n    commentsRefetch,\n  } = useCommentsHandler(inspectionId)\n\n  useEffect(() => {\n    commentsRefetch()\n    return () => {}\n  }, [commentsStatus, commentsRefetch])\n\n  return (<>\n    <CommentDisplay \n      status={commentsStatus} \n      comments={comments}/>\n    <InspectionCommentForm handlePost={addComment}/>\n  </>\n  )\n}\n\ntype CommentDisplayProps = {\n  comments?: TComment[]\n  status: 'idle' | 'success' | 'error' | 'loading'\n}\n\nconst CommentDisplay: React.FC<CommentDisplayProps> = (\n  {comments, status}\n) => {\n  if (status === 'loading' || comments === undefined) return <Spin/>\n  if (comments.length === 0 ) return <></>\n\n  return <>\n    <Card title='Комментарии'\n    >\n      <div \n        style={{maxHeight: '250px', overflow: 'scroll'}}>\n        <List\n          dataSource={comments.reverse()}\n          renderItem={item => <List.Item>\n            <Card style={{width: '100%'}}>{item.text}</Card>\n          </List.Item>}\n        />\n      </div>\n    </Card>\n  </>\n}\n\ntype InspectionCommentFormProps = {\n  handlePost: (val: TComment) => void\n}\n\nconst InspectionCommentForm: React.FC<InspectionCommentFormProps> = (\n  {handlePost}\n) => {\n  const [message, setMessage] = useState<string>('')\n  const [isDisabled, setIsDisabled] = useState(true)\n\n  const handleSubmit = () => {\n    handlePost({text: message})\n    setMessage('')\n  }\n\n  useEffect(() => {\n    if  (message === '') setIsDisabled(true)\n    if (message !== '') \n      setIsDisabled(false)\n    return () => {}\n  }, [message])\n  \n\n  return <Card style={{margin: '16px'}} size='small' title='Коментарий'>\n    <Form labelAlign={'left'} layout=\"vertical\">\n      <Input.TextArea \n        allowClear \n        showCount \n        value={message} \n        onChange={val => setMessage(val.target.value)}>\n      </Input.TextArea>\n      <Button type='primary'\n        disabled={isDisabled}\n        onClick={handleSubmit}>\n        Отправить\n      </Button>\n    </Form>\n  </Card>\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}