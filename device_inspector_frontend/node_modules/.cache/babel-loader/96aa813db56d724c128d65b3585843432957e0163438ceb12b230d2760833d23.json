{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery, useQueryClient } from 'react-query';\nimport { getLastImage } from '../services/getLastImage';\nimport { useEffect, useState } from 'react';\nimport { useDebounce } from '../../../hooks/useDebounce';\nexport const useLastImageGet = refetchDelay => {\n  _s();\n  const debounce = useDebounce();\n  const queryClient = useQueryClient();\n  const [sector, setSector] = useState();\n  const updateSector = sector => {\n    setSector(sector);\n    queryClient.invalidateQueries('lastImage');\n  };\n  const {\n    data,\n    status,\n    refetch,\n    dataUpdatedAt\n  } = useQuery(['lastImage', {\n    id: sector === null || sector === void 0 ? void 0 : sector.id\n  }], {\n    queryFn: () => sector === undefined ? '' : getLastImage(sector.id)\n  });\n  useEffect(() => {\n    if (status === 'success') debounce(() => {\n      refetch();\n    }, refetchDelay);\n  }, [status, refetch]);\n  return {\n    lastImageString: data,\n    lastImageStatus: status,\n    lastImageUpdatedAt: dataUpdatedAt,\n    selectedSector: sector,\n    lastImageRefetch: refetch,\n    updateSectorId: updateSector\n  };\n};\n_s(useLastImageGet, \"SAr1fg4zgoDVsfw6hPjtBIXy908=\", false, function () {\n  return [useDebounce, useQueryClient, useQuery];\n});","map":{"version":3,"names":["useQuery","useQueryClient","getLastImage","useEffect","useState","useDebounce","useLastImageGet","refetchDelay","_s","debounce","queryClient","sector","setSector","updateSector","invalidateQueries","data","status","refetch","dataUpdatedAt","id","queryFn","undefined","lastImageString","lastImageStatus","lastImageUpdatedAt","selectedSector","lastImageRefetch","updateSectorId"],"sources":["/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/src/features/latestInspectionImage/hooks/useLastImageGet.ts"],"sourcesContent":["import { useQuery, useQueryClient } from 'react-query'\nimport { getLastImage } from '../services/getLastImage'\nimport { useEffect, useState } from 'react'\nimport { useDebounce } from '../../../hooks/useDebounce'\nimport { TSector } from '../../../types/sectorType'\n\nexport const useLastImageGet = (\n  refetchDelay: number\n) => {\n  const debounce = useDebounce()\n  \n  const queryClient = useQueryClient()\n\n  const [sector, setSector] = useState<TSector>()\n  const updateSector = (sector: TSector) => {\n    setSector(sector)\n    queryClient.invalidateQueries('lastImage')\n  }\n\n  const {data, status, refetch, dataUpdatedAt} = useQuery<string, string>(\n    ['lastImage', {id: sector?.id}],\n    {queryFn: () => sector === undefined ? '' : getLastImage(sector.id)}\n  )\n\n  useEffect(() => {\n    if (status === 'success')\n      debounce(() => {refetch()}, refetchDelay)\n  }, [status, refetch])\n  \n  return {\n    lastImageString: data, \n    lastImageStatus: status, \n    lastImageUpdatedAt: dataUpdatedAt,\n    selectedSector: sector,\n    lastImageRefetch: refetch,\n    updateSectorId: updateSector,\n  }\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,cAAc,QAAQ,aAAa;AACtD,SAASC,YAAY,QAAQ,0BAA0B;AACvD,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,4BAA4B;AAGxD,OAAO,MAAMC,eAAe,GAC1BC,YAAoB,IACjB;EAAAC,EAAA;EACH,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;EAE9B,MAAMK,WAAW,GAAGT,cAAc,CAAC,CAAC;EAEpC,MAAM,CAACU,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAU,CAAC;EAC/C,MAAMS,YAAY,GAAIF,MAAe,IAAK;IACxCC,SAAS,CAACD,MAAM,CAAC;IACjBD,WAAW,CAACI,iBAAiB,CAAC,WAAW,CAAC;EAC5C,CAAC;EAED,MAAM;IAACC,IAAI;IAAEC,MAAM;IAAEC,OAAO;IAAEC;EAAa,CAAC,GAAGlB,QAAQ,CACrD,CAAC,WAAW,EAAE;IAACmB,EAAE,EAAER,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEQ;EAAE,CAAC,CAAC,EAC/B;IAACC,OAAO,EAAEA,CAAA,KAAMT,MAAM,KAAKU,SAAS,GAAG,EAAE,GAAGnB,YAAY,CAACS,MAAM,CAACQ,EAAE;EAAC,CACrE,CAAC;EAEDhB,SAAS,CAAC,MAAM;IACd,IAAIa,MAAM,KAAK,SAAS,EACtBP,QAAQ,CAAC,MAAM;MAACQ,OAAO,CAAC,CAAC;IAAA,CAAC,EAAEV,YAAY,CAAC;EAC7C,CAAC,EAAE,CAACS,MAAM,EAAEC,OAAO,CAAC,CAAC;EAErB,OAAO;IACLK,eAAe,EAAEP,IAAI;IACrBQ,eAAe,EAAEP,MAAM;IACvBQ,kBAAkB,EAAEN,aAAa;IACjCO,cAAc,EAAEd,MAAM;IACtBe,gBAAgB,EAAET,OAAO;IACzBU,cAAc,EAAEd;EAClB,CAAC;AACH,CAAC;AAAAL,EAAA,CA/BYF,eAAe;EAAA,QAGTD,WAAW,EAERJ,cAAc,EAQaD,QAAQ;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}