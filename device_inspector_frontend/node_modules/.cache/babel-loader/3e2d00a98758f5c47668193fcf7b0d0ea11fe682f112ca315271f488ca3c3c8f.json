{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery } from 'react-query';\nimport { getInspections, getInspectionsTotal } from '../../../services/inspectionService';\nimport { queryClient } from '../../../App';\nimport { InspectionStatus } from '../../../types/inspectionType';\nfunction generateQuery(offset, limit) {\n  let target = new URLSearchParams();\n  if (offset != null) target.append('skip', ((offset - 1) * 10).toString());\n  if (limit != null) target.append('limit', limit.toString());\n  target.append('status', InspectionStatus.REQUIRE_VERIFICATION);\n  return target;\n}\nexport default function useUnverifiedInspectionsGet(offset, limit) {\n  _s();\n  const total = useQuery({\n    queryKey: ['inspectionsTotal'],\n    queryFn: async () => await getInspectionsTotal(generateQuery(offset, limit))\n  });\n  const {\n    data,\n    status,\n    refetch\n  } = useQuery({\n    queryKey: ['inspectionsHistory'],\n    queryFn: () => getInspections(generateQuery(offset, limit)),\n    initialData: () => {\n      return queryClient.getQueryData('inspectionsHistory');\n    }\n  });\n  return {\n    inspectionsData: data,\n    inspectionsStatus: status,\n    inspectionsRefetch: refetch,\n    inspectionsTotal: total\n  };\n}\n_s(useUnverifiedInspectionsGet, \"37H9VqpEeid8Ow1xctpKVwRaAwY=\", false, function () {\n  return [useQuery, useQuery];\n});","map":{"version":3,"names":["useQuery","getInspections","getInspectionsTotal","queryClient","InspectionStatus","generateQuery","offset","limit","target","URLSearchParams","append","toString","REQUIRE_VERIFICATION","useUnverifiedInspectionsGet","_s","total","queryKey","queryFn","data","status","refetch","initialData","getQueryData","inspectionsData","inspectionsStatus","inspectionsRefetch","inspectionsTotal"],"sources":["/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/device_inspector_frontend/src/features/inspectionsCheck/hooks/useUnverifiedInspectionsGet.ts"],"sourcesContent":["import {useQuery} from 'react-query'\nimport {\n  getInspections,\n  getInspectionsTotal\n} from '../../../services/inspectionService'\nimport {queryClient} from '../../../App'\nimport {InspectionStatus, TInspection} from '../../../types/inspectionType'\n\n\n\n\nfunction generateQuery( \n  offset?: number, \n  limit?: number\n): URLSearchParams {    \n  let target = new URLSearchParams()\n  if (offset != null)\n    target.append('skip', ((offset-1) * 10).toString())\n  if (limit != null)\n    target.append('limit', limit.toString())\n  target.append('status', InspectionStatus.REQUIRE_VERIFICATION)\n  return target\n}\n\n\nexport default function useUnverifiedInspectionsGet(\n  offset: number, \n  limit: number\n) {\n  const total = useQuery<number>({queryKey: ['inspectionsTotal'], \n    queryFn: async () => await getInspectionsTotal(\n      generateQuery(offset, limit)\n    )\n  })\n\n  const {\n    data,\n    status,\n    refetch\n  } = useQuery<TInspection[], string>(\n    {\n      queryKey: ['inspectionsHistory'],\n      queryFn: () => getInspections(\n        generateQuery(offset, limit)\n      ), \n      initialData: () => {\n        return queryClient.getQueryData('inspectionsHistory')\n      }\n    })\n\n\n  return {\n    inspectionsData: data, \n    inspectionsStatus: status, \n    inspectionsRefetch: refetch, \n    inspectionsTotal: total\n  }\n}"],"mappings":";AAAA,SAAQA,QAAQ,QAAO,aAAa;AACpC,SACEC,cAAc,EACdC,mBAAmB,QACd,qCAAqC;AAC5C,SAAQC,WAAW,QAAO,cAAc;AACxC,SAAQC,gBAAgB,QAAoB,+BAA+B;AAK3E,SAASC,aAAaA,CACpBC,MAAe,EACfC,KAAc,EACG;EACjB,IAAIC,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;EAClC,IAAIH,MAAM,IAAI,IAAI,EAChBE,MAAM,CAACE,MAAM,CAAC,MAAM,EAAE,CAAC,CAACJ,MAAM,GAAC,CAAC,IAAI,EAAE,EAAEK,QAAQ,CAAC,CAAC,CAAC;EACrD,IAAIJ,KAAK,IAAI,IAAI,EACfC,MAAM,CAACE,MAAM,CAAC,OAAO,EAAEH,KAAK,CAACI,QAAQ,CAAC,CAAC,CAAC;EAC1CH,MAAM,CAACE,MAAM,CAAC,QAAQ,EAAEN,gBAAgB,CAACQ,oBAAoB,CAAC;EAC9D,OAAOJ,MAAM;AACf;AAGA,eAAe,SAASK,2BAA2BA,CACjDP,MAAc,EACdC,KAAa,EACb;EAAAO,EAAA;EACA,MAAMC,KAAK,GAAGf,QAAQ,CAAS;IAACgB,QAAQ,EAAE,CAAC,kBAAkB,CAAC;IAC5DC,OAAO,EAAE,MAAAA,CAAA,KAAY,MAAMf,mBAAmB,CAC5CG,aAAa,CAACC,MAAM,EAAEC,KAAK,CAC7B;EACF,CAAC,CAAC;EAEF,MAAM;IACJW,IAAI;IACJC,MAAM;IACNC;EACF,CAAC,GAAGpB,QAAQ,CACV;IACEgB,QAAQ,EAAE,CAAC,oBAAoB,CAAC;IAChCC,OAAO,EAAEA,CAAA,KAAMhB,cAAc,CAC3BI,aAAa,CAACC,MAAM,EAAEC,KAAK,CAC7B,CAAC;IACDc,WAAW,EAAEA,CAAA,KAAM;MACjB,OAAOlB,WAAW,CAACmB,YAAY,CAAC,oBAAoB,CAAC;IACvD;EACF,CAAC,CAAC;EAGJ,OAAO;IACLC,eAAe,EAAEL,IAAI;IACrBM,iBAAiB,EAAEL,MAAM;IACzBM,kBAAkB,EAAEL,OAAO;IAC3BM,gBAAgB,EAAEX;EACpB,CAAC;AACH;AAACD,EAAA,CAhCuBD,2BAA2B;EAAA,QAInCb,QAAQ,EAUlBA,QAAQ;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}