{"ast":null,"code":"var _jsxFileName = \"/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/src/features/currentParty/components/main.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useSpecificationsGet } from '../../../hooks/useSpecificationGet';\nimport { useCurrentPartyGet } from '../../../hooks/useCurrentPartyGet';\nimport { SpecificationInput } from '../../../components/specificationInput';\nimport { SidePicker } from './sidePicker';\nimport { Button, Form, Spin } from 'antd';\nimport Title from 'antd/es/typography/Title';\nimport updateCurrentPartyHandler from '../hooks/useCurrentPartyHandler';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function MainPage() {\n  _s();\n  const [specifications, specificationStatus] = useSpecificationsGet();\n  const [currentParty, currentPartyStatus] = useCurrentPartyGet();\n  const [specificationId, setSpecificationId] = useState(0);\n  const [currentSpecificationName, setCurrentSpecificationName] = useState(null);\n  const [side, setSide] = useState('top');\n  const {\n    update,\n    updateStatus\n  } = updateCurrentPartyHandler(specificationId);\n  const handleSpecification = specificationPicked => {\n    setSpecificationId(specificationPicked);\n  };\n  const handleSide = sidePicked => {\n    setSide(sidePicked === 'top' ? 'top' : 'bot');\n  };\n  const handleFormSubmit = () => {\n    if (specificationId) {\n      update(side);\n    }\n  };\n  useEffect(() => {\n    if (currentPartyStatus == 'success' && specificationStatus == 'success') {\n      var _find;\n      setSpecificationId(currentParty.specification_id);\n      setSide(currentParty.side);\n      const specName = (_find = specifications.find(specification => specification.id == currentParty.specification_id)) === null || _find === void 0 ? void 0 : _find.name;\n      if (specName) setCurrentSpecificationName(specName);\n    }\n  }, [currentParty, specifications]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      level: 1,\n      children: \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0430\\u044F \\u043F\\u0430\\u0440\\u0442\\u0438\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      style: {\n        padding: '16px'\n      },\n      children: currentSpecificationName ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\",\n          style: {\n            width: '120px'\n          },\n          children: /*#__PURE__*/_jsxDEV(SpecificationInput, {\n            defaultValue: {\n              label: currentSpecificationName ? currentSpecificationName : '',\n              value: specificationId\n            },\n            isMultiple: false,\n            allowClear: false,\n            onChange: handleSpecification\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u0421\\u0442\\u043E\\u0440\\u043E\\u043D\\u0430\",\n          style: {\n            width: '120px'\n          },\n          children: /*#__PURE__*/_jsxDEV(SidePicker, {\n            onChange: handleSide,\n            defaultValue: side\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleFormSubmit,\n            children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 11\n  }, this);\n}\n_s(MainPage, \"sUokv2x4cuzd9roBIvNEHTv82cI=\", false, function () {\n  return [useSpecificationsGet, useCurrentPartyGet];\n});\n_c = MainPage;\nvar _c;\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["React","useEffect","useState","useSpecificationsGet","useCurrentPartyGet","SpecificationInput","SidePicker","Button","Form","Spin","Title","updateCurrentPartyHandler","jsxDEV","_jsxDEV","Fragment","_Fragment","MainPage","_s","specifications","specificationStatus","currentParty","currentPartyStatus","specificationId","setSpecificationId","currentSpecificationName","setCurrentSpecificationName","side","setSide","update","updateStatus","handleSpecification","specificationPicked","handleSide","sidePicked","handleFormSubmit","_find","specification_id","specName","find","specification","id","name","children","level","fileName","_jsxFileName","lineNumber","columnNumber","layout","style","padding","Item","label","width","defaultValue","value","isMultiple","allowClear","onChange","onClick","_c","$RefreshReg$"],"sources":["/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/src/features/currentParty/components/main.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useSpecificationsGet } from '../../../hooks/useSpecificationGet'\nimport { useCurrentPartyGet } from '../../../hooks/useCurrentPartyGet'\nimport { SpecificationInput } from '../../../components/specificationInput'\nimport { TCurrentParty } from '../../../types/currentPartyType'\nimport { TSpecification } from '../../../types/specificationType'\nimport { SidePicker } from './sidePicker'\nimport {Button, Col, Form, Input, Row, Space, Spin } from 'antd'\nimport Title from 'antd/es/typography/Title'\nimport updateCurrentPartyHandler from '../hooks/useCurrentPartyHandler'\n\nexport function MainPage() {\n  const [specifications, specificationStatus] = useSpecificationsGet()\n  const [currentParty, currentPartyStatus] = useCurrentPartyGet()\n  const [specificationId, setSpecificationId] = useState<number>(0)\n  const [\n    currentSpecificationName, \n    setCurrentSpecificationName\n  ] = useState<string|null>(null)\n  const [side, setSide] = useState<string>('top') \n\n  const {\n    update,\n    updateStatus\n  } = updateCurrentPartyHandler(specificationId)\n\n  const handleSpecification = (specificationPicked: number) => {\n    setSpecificationId(specificationPicked)\n  }\n\n  const handleSide = (sidePicked: string) => {\n    setSide(sidePicked === 'top' ? 'top' : 'bot')\n  }\n\n  const handleFormSubmit = () => {\n    if (specificationId) {\n      update(side)\n    }\n  }\n\n  useEffect(() => {\n    if (currentPartyStatus == 'success' \n    && \n    specificationStatus == 'success' \n    ) {\n      setSpecificationId((currentParty as TCurrentParty).specification_id)\n      setSide((currentParty as TCurrentParty).side)\n      const specName = (specifications as TSpecification[])\n        .find(\n          (specification: TSpecification) => \n            specification.id == (currentParty as TCurrentParty)\n              .specification_id)\n        ?.name\n      if (specName)\n        setCurrentSpecificationName(specName)\n    }\n  }, [currentParty, specifications])\n\n  return (<div>\n    <Title level={1}>Текущая партия</Title>\n    <Form \n      layout='vertical'\n      style={{padding: '16px'}}\n    >\n      {currentSpecificationName\n        ?\n        <>\n          <Form.Item label=\"Спецификация\" style={{width: '120px'}}>\n            <SpecificationInput \n              defaultValue={{\n                label: currentSpecificationName \n                  ? currentSpecificationName : '',\n                value: specificationId\n              }}\n              isMultiple={false}\n              allowClear ={false}\n              onChange={handleSpecification} \n            />\n          </Form.Item>\n          <Form.Item label=\"Сторона\" style={{width: '120px'}}>\n            <SidePicker \n              onChange={handleSide}\n              defaultValue={side}\n            />\n          </Form.Item>\n          <Form.Item>\n            <Button \n              onClick={handleFormSubmit}>\n                Сохранить\n            </Button>\n          </Form.Item>\n        </>\n        : <Spin/>\n      }\n    </Form>\n  </div>\n  )\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}