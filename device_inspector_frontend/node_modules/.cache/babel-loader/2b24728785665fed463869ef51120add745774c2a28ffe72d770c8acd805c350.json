{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery, useQueryClient } from 'react-query';\nimport { getLastImage } from '../services/getLastImage';\nimport { useState } from 'react';\nexport const useLastImageGet = refetchDelay => {\n  _s();\n  const queryClient = useQueryClient();\n  const [sectorId, setSectorId] = useState();\n  const updateSector = updatedSectorId => {\n    console.log(updatedSectorId);\n    queryClient.invalidateQueries(['lastImage', {\n      id: sectorId\n    }]);\n    setSectorId(updatedSectorId);\n  };\n  const {\n    data,\n    status,\n    refetch,\n    dataUpdatedAt\n  } = useQuery(['lastImage', {\n    id: sectorId\n  }], {\n    queryFn: () => sectorId === undefined ? undefined : getLastImage(sectorId),\n    refetchInterval: refetchDelay\n  });\n  return {\n    lastImageString: data,\n    lastImageStatus: status,\n    lastImageUpdatedAt: dataUpdatedAt,\n    selectedSector: sectorId,\n    lastImageRefetch: refetch,\n    updateSectorId: updateSector\n  };\n};\n_s(useLastImageGet, \"OJnQD/kGYEruMYYEGr2AyhdDG7A=\", false, function () {\n  return [useQueryClient, useQuery];\n});","map":{"version":3,"names":["useQuery","useQueryClient","getLastImage","useState","useLastImageGet","refetchDelay","_s","queryClient","sectorId","setSectorId","updateSector","updatedSectorId","console","log","invalidateQueries","id","data","status","refetch","dataUpdatedAt","queryFn","undefined","refetchInterval","lastImageString","lastImageStatus","lastImageUpdatedAt","selectedSector","lastImageRefetch","updateSectorId"],"sources":["/Users/Rober/dev/work/x_keeper/new_device_inspector/device_inspector_frontend/src/features/latestInspectionImage/hooks/useLastImageGet.ts"],"sourcesContent":["import { useQuery, useQueryClient } from 'react-query'\nimport { getLastImage } from '../services/getLastImage'\nimport { useState } from 'react'\n\nexport const useLastImageGet = (\n  refetchDelay: number\n) => {\n  \n  const queryClient = useQueryClient()\n\n  const [sectorId, setSectorId] = useState<number | undefined>()\n  const updateSector = (updatedSectorId: number | undefined) => {\n    console.log(updatedSectorId)\n    queryClient.invalidateQueries(['lastImage', {id: sectorId}])\n    setSectorId(updatedSectorId)\n  }\n\n  const {data, status, refetch, dataUpdatedAt} = \n  useQuery<string | undefined, string>(\n    ['lastImage', {id: sectorId}],\n    {\n      queryFn: () => sectorId === undefined \n        ? undefined \n        : getLastImage(sectorId),\n      refetchInterval: refetchDelay,\n    }\n  )\n  \n  return {\n    lastImageString: data, \n    lastImageStatus: status, \n    lastImageUpdatedAt: dataUpdatedAt,\n    selectedSector: sectorId,\n    lastImageRefetch: refetch,\n    updateSectorId: updateSector,\n  }\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,cAAc,QAAQ,aAAa;AACtD,SAASC,YAAY,QAAQ,0BAA0B;AACvD,SAASC,QAAQ,QAAQ,OAAO;AAEhC,OAAO,MAAMC,eAAe,GAC1BC,YAAoB,IACjB;EAAAC,EAAA;EAEH,MAAMC,WAAW,GAAGN,cAAc,CAAC,CAAC;EAEpC,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGN,QAAQ,CAAqB,CAAC;EAC9D,MAAMO,YAAY,GAAIC,eAAmC,IAAK;IAC5DC,OAAO,CAACC,GAAG,CAACF,eAAe,CAAC;IAC5BJ,WAAW,CAACO,iBAAiB,CAAC,CAAC,WAAW,EAAE;MAACC,EAAE,EAAEP;IAAQ,CAAC,CAAC,CAAC;IAC5DC,WAAW,CAACE,eAAe,CAAC;EAC9B,CAAC;EAED,MAAM;IAACK,IAAI;IAAEC,MAAM;IAAEC,OAAO;IAAEC;EAAa,CAAC,GAC5CnB,QAAQ,CACN,CAAC,WAAW,EAAE;IAACe,EAAE,EAAEP;EAAQ,CAAC,CAAC,EAC7B;IACEY,OAAO,EAAEA,CAAA,KAAMZ,QAAQ,KAAKa,SAAS,GACjCA,SAAS,GACTnB,YAAY,CAACM,QAAQ,CAAC;IAC1Bc,eAAe,EAAEjB;EACnB,CACF,CAAC;EAED,OAAO;IACLkB,eAAe,EAAEP,IAAI;IACrBQ,eAAe,EAAEP,MAAM;IACvBQ,kBAAkB,EAAEN,aAAa;IACjCO,cAAc,EAAElB,QAAQ;IACxBmB,gBAAgB,EAAET,OAAO;IACzBU,cAAc,EAAElB;EAClB,CAAC;AACH,CAAC;AAAAJ,EAAA,CAhCYF,eAAe;EAAA,QAINH,cAAc,EAUlCD,QAAQ;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}