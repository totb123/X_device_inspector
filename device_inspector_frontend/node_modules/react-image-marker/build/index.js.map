{"version":3,"file":"index.js","sources":["../src/utils/index.ts","../src/index.tsx"],"sourcesContent":["export type ImagePosition = {\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n};\nexport type MousePosition = {\n    clientX: number;\n    pageY: number;\n};\nexport const calculateMarkerPosition = (\n    mousePosition: MousePosition,\n    imagePosition: ImagePosition,\n    scrollY: number,\n    bufferLeft: number,\n    bufferTop: number\n) => {\n    const pixelsLeft = mousePosition.clientX - imagePosition.left;\n    let pixelsTop;\n    if (imagePosition.top < 0) {\n        pixelsTop = mousePosition.pageY - scrollY + imagePosition.top * -1;\n    } else {\n        pixelsTop = mousePosition.pageY - scrollY - imagePosition.top;\n    }\n    const top = ((pixelsTop - bufferTop) * 100) / imagePosition.height;\n    const left = ((pixelsLeft - bufferLeft) * 100) / imagePosition.width;\n    return [top, left];\n};\n","import * as React from 'react';\nimport './image-marker.scss';\nimport { calculateMarkerPosition } from './utils';\n\nconst DEFAULT_BUFFER = 12;\n\nexport type Marker = {\n    top: Number;\n    left: Number;\n};\nexport type MarkerComponentProps = {\n    top: Number;\n    left: Number;\n    itemNumber: Number;\n};\n\ntype Props = {\n    src: string;\n    markers: Array<Marker>;\n    onAddMarker?: (marker: Marker) => void;\n    markerComponent?: React.FC<MarkerComponentProps>;\n    bufferLeft?: number;\n    bufferTop?: number;\n    alt?: string;\n    extraClass?: string;\n};\nconst ImageMarker: React.FC<Props> = ({\n    src,\n    markers,\n    onAddMarker,\n    markerComponent: MarkerComponent,\n    bufferLeft = DEFAULT_BUFFER,\n    bufferTop = DEFAULT_BUFFER,\n    alt = 'Markers',\n    extraClass = '',\n}: Props) => {\n    const imageRef = React.useRef<HTMLImageElement>(null);\n    const handleImageClick = (event: React.MouseEvent) => {\n        if (!imageRef.current || !onAddMarker) {\n            return;\n        }\n        const imageDimentions = imageRef.current.getBoundingClientRect();\n\n        const [top, left] = calculateMarkerPosition(\n            event,\n            imageDimentions,\n            window.scrollY,\n            bufferLeft,\n            bufferTop\n        );\n\n        onAddMarker({\n            top,\n            left,\n        });\n    };\n\n    const getItemPosition = (marker: Marker) => {\n        return {\n            top: `${marker.top}%`,\n            left: `${marker.left}%`,\n        };\n    };\n\n    return (\n        <div className=\"image-marker\">\n            <img\n                src={src}\n                alt={alt}\n                onClick={handleImageClick}\n                className={'image-marker__image ' + extraClass}\n                ref={imageRef}\n            />\n            {markers.map((marker, itemNumber) => (\n                <div\n                    className={`image-marker__marker ${\n                        !MarkerComponent && 'image-marker__marker--default'\n                    }`}\n                    style={getItemPosition(marker)}\n                    key={itemNumber}\n                    data-testid=\"marker\"\n                >\n                    {MarkerComponent ? (\n                        <MarkerComponent {...marker} itemNumber={itemNumber} />\n                    ) : (\n                        itemNumber + 1\n                    )}\n                </div>\n            ))}\n        </div>\n    );\n};\n\nexport default ImageMarker;\n"],"names":["React.useRef","React.createElement"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUO,IAAM,uBAAuB,GAAG,UACnC,aAA4B,EAC5B,aAA4B,EAC5B,OAAe,EACf,UAAkB,EAClB,SAAiB;IAEjB,IAAM,UAAU,GAAG,aAAa,CAAC,OAAO,GAAG,aAAa,CAAC,IAAI,CAAC;IAC9D,IAAI,SAAS,CAAC;IACd,IAAI,aAAa,CAAC,GAAG,GAAG,CAAC,EAAE;QACvB,SAAS,GAAG,aAAa,CAAC,KAAK,GAAG,OAAO,GAAG,aAAa,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;KACtE;SAAM;QACH,SAAS,GAAG,aAAa,CAAC,KAAK,GAAG,OAAO,GAAG,aAAa,CAAC,GAAG,CAAC;KACjE;IACD,IAAM,GAAG,GAAG,CAAC,CAAC,SAAS,GAAG,SAAS,IAAI,GAAG,IAAI,aAAa,CAAC,MAAM,CAAC;IACnE,IAAM,IAAI,GAAG,CAAC,CAAC,UAAU,GAAG,UAAU,IAAI,GAAG,IAAI,aAAa,CAAC,KAAK,CAAC;IACrE,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACvB,CAAC,CAAC;;ACvBF,IAAM,cAAc,GAAG,EAAE,CAAC;AAsB1B,IAAM,WAAW,GAAoB,UAAC,EAS9B;QARJ,YAAG,EACH,oBAAO,EACP,4BAAW,EACX,oCAAgC,EAChC,kBAA2B,EAA3B,gDAA2B,EAC3B,iBAA0B,EAA1B,+CAA0B,EAC1B,WAAe,EAAf,oCAAe,EACf,kBAAe,EAAf,oCAAe;IAEf,IAAM,QAAQ,GAAGA,YAAY,CAAmB,IAAI,CAAC,CAAC;IACtD,IAAM,gBAAgB,GAAG,UAAC,KAAuB;QAC7C,IAAI,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,WAAW,EAAE;YACnC,OAAO;SACV;QACD,IAAM,eAAe,GAAG,QAAQ,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;QAE3D,IAAA,2FAML,EANM,WAAG,EAAE,YAAI,CAMd;QAEF,WAAW,CAAC;YACR,GAAG,KAAA;YACH,IAAI,MAAA;SACP,CAAC,CAAC;KACN,CAAC;IAEF,IAAM,eAAe,GAAG,UAAC,MAAc;QACnC,OAAO;YACH,GAAG,EAAK,MAAM,CAAC,GAAG,MAAG;YACrB,IAAI,EAAK,MAAM,CAAC,IAAI,MAAG;SAC1B,CAAC;KACL,CAAC;IAEF,QACIC,6BAAK,SAAS,EAAC,cAAc;QACzBA,6BACI,GAAG,EAAE,GAAG,EACR,GAAG,EAAE,GAAG,EACR,OAAO,EAAE,gBAAgB,EACzB,SAAS,EAAE,sBAAsB,GAAG,UAAU,EAC9C,GAAG,EAAE,QAAQ,GACf;QACD,OAAO,CAAC,GAAG,CAAC,UAAC,MAAM,EAAE,UAAU,IAAK,QACjCA,6BACI,SAAS,EAAE,2BACP,CAAC,eAAe,IAAI,+BAA+B,CACrD,EACF,KAAK,EAAE,eAAe,CAAC,MAAM,CAAC,EAC9B,GAAG,EAAE,UAAU,iBACH,QAAQ,IAEnB,eAAe,IACZA,oBAAC,eAAe,eAAK,MAAM,IAAE,UAAU,EAAE,UAAU,IAAI,KAEvD,UAAU,GAAG,CAAC,CACjB,CACC,IACT,CAAC,CACA,EACR;AACN,CAAC,CAAC;;;;"}